# Телеграм-бот и ВК-бот, обучаемые нейросетью для ответов

Это чатботы ВК и телеграм, которые дают осмысленные ответы на сообщения от пользователя. 
Собщение от полтзователя отправляется в нейросеть [Dialogflow ES](https://dialogflow.cloud.google.com/#/getStarted)
там подбирается подходящий ответ и он приходит пользователю

## Примеры работы ботов:
### Телеграм бот

![Телеграм](https://github.com/Arkady-Bikhd/recognizetextbot/assets/76903715/fb7c13c4-d846-4147-a343-6d9316c460fa)


### ВК бот

![vk](https://github.com/Arkady-Bikhd/recognizetextbot/assets/76903715/5fce0ab0-7950-4fac-9150-759a24e91a88)


Работу бота можно посмотреть в телеграм 
```
https://t.me/caparkbot
```
Или написав в группу в ВК
```
https://vk.com/club219429438
```
## Запуск:

### 1. Копируем содержимое проекта себе в рабочую директорию
```
git clone <метод копирования>
```
У вас будет 3 рабочие файла:
- recognize_text_bot.py - этот файл для работы с ТГ ботом
- vk_bot.py - это файл для работы с ВК
- create_intent.py - это файл для создание "намерения" через код, но можно и на сайте

### 2. Устанавливаем библиотеки:
```
pip install -r requirements.txt
```

### 3. Для работы с Dialogflow ES необходимо там зарегестрироваться и [создать проект](https://cloud.google.com/dialogflow/es/docs/quick/setup) и [агента](https://cloud.google.com/dialogflow/es/docs/quick/build-agent):
После прохождение этих шагов у вас должно быть `PROJECT_ID` и созданный файл `.json`  вашими данными для авторизации

### 4. Для хранения переменных окружения создаем файл .env:
```
touch .env
```
Для тестирования телеграм-бота добавляем токен в `.env` файл: `TG_BOT_TOKEN='токен вашего бота'`

Для работы с Dialogflow ES в `.env` файл: `PROJECT_ID='ваш PROJECT_ID полученный при создании проекта'`
А также `GOOGLE_APPLICATION_CREDENTIALS='путь куда вы сохранили .json файл с авторизацией'`

Для тестирования ВК-бота добавляем токен в `.env` файл: `VK_ACCESS_TOKEN=` токен группы в ВК, куда бот будет отправлять сообщения'`
### 5. Запуск

```
python recognize_text_bot.py  
```
### 6. Тренировка бота
Тренировку бота можно сделать на сайте Dialogflow на странице агента в разделе `Intent`. 
Указываете тренировочные фразы, которые может вводить пользователь, и ваш ответ.

Также это можно сделать через программу `create_intent.py`. Для этого понадобится файл `.json` следующего содержания:

```pycon
{
    "Устройство на работу": {
        "questions": [
            "Как устроиться к вам на работу?",
            "Как устроиться к вам?",
            "Как работать у вас?",
            "Хочу работать у вас",
            "Возможно-ли устроиться к вам?",
            "Можно-ли мне поработать у вас?",
            "Хочу работать редактором у вас"
        ],
        "answer": "Если вы хотите устроиться к нам, напишите на почту game-of-verbs@gmail.com мини-эссе о себе и прикрепите ваше портфолио."
    },
    "Забыл пароль": {
        "questions": [
            "Не помню пароль",
            "Не могу войти",
            "Проблемы со входом",
            "Забыл пароль",
            "Забыл логин",
            "Восстановить пароль",
            "Как восстановить пароль",
            "Неправильный логин или пароль",
            "Ошибка входа",
            "Не могу войти в аккаунт"
        ],
        "answer": "Если вы не можете войти на сайт, воспользуйтесь кнопкой «Забыли пароль?» под формой входа. Вам на почту прийдёт письмо с дальнейшими инструкциями. Проверьте папку «Спам», иногда письма попадают в неё."
    }}
```
Пример запуска
```
python create_intent.py --json_file questions.json 
```
## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
